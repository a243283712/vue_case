<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<title>Vue</title>

		<script type="text/javascript" src="assets/js/vue.js"></script>
		<link rel="stylesheet" type="text/css" href="assets/css/style.css" />
	</head>

	<body>
	<!--计算-->
		<div id="box">
			<p>苹果</p>
			<p>购买数量：{{n}}</p>
			<p><button @click="add">增加</button></p>
			<p><button @click="close">减少</button></p>
			
		</div>

		<style>

		</style>

		<script>
			var vm = new Vue({
				el:'#box',
				data:{
					n:1
				},
				methods:{
					add:function(){
						this.n ++
					},
					close:function(){
						this.n --
					}
				},
				//内置watch
//				watch:{
//					n:function(newVal,oldVal){
//						console.log(newVal) //变化前后的两个值
//						console.log(oldVal)
//						
//						if(newVal < 1){
//							vm.n = 1;
//						}
//					}
//				}
			})
			// vm.$watch 返回一个取消观察函数，用来停止触发回调：
			// 选项：deep 为了发现对象内部值的变化，可以在选项参数中指定 deep: true 
			// 选项：immediate 在选项参数中指定 immediate: true 将立即以表达式的当前值触发回调：
			vm.$watch('n',function(newVal,oldVal){
				console.log(newVal) //变化前后的两个值
				console.log(oldVal)
				
				if(newVal < 1){
					vm.n = 1;
				}
			},{deep:true,immediate:true})
			
			
			
		</script>
	</body>

</html>